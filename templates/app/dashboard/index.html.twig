{% extends 'app/base_dashboard.html.twig' %}

{% block meta_title %}
    {{ 'dashboard.shared.index.title.meta'|trans }} | {{ parent() }}
{% endblock %}

{% block main_attributes %}class="flex flex-1 flex-col gap-4 p-4"{% endblock %}

{% block main %}
    <div class="grid gap-4 lg:grid-cols-2">
        <twig:Card variant="outline" size="lg">
            <twig:Card:CardHeader>
                <twig:Card:CardTitle>{{ 'dashboard.analytics.index.chart.monthly'|trans }}</twig:Card:CardTitle>
            </twig:Card:CardHeader>
            <twig:Card:CardContent>
                {{ render_chart(monthly_chart, {'data-slot': 'chart'}) }}
            </twig:Card:CardContent>
        </twig:Card>
        <twig:Card variant="outline" size="lg">
            <twig:Card:CardHeader>
                <twig:Card:CardTitle>{{ 'dashboard.analytics.index.chart.daily'|trans }}</twig:Card:CardTitle>
            </twig:Card:CardHeader>
            <twig:Card:CardContent>
                {{ render_chart(daily_chart, {'data-slot': 'chart'}) }}
            </twig:Card:CardContent>
        </twig:Card>
    </div>
    {%- if page_views is not empty -%}
        <twig:Card size="lg">
            <twig:Card:CardHeader>
                <twig:Card:CardTitle>{{ 'dashboard.analytics.index.card.page_views'|trans }}</twig:Card:CardTitle>
            </twig:Card:CardHeader>
            <twig:Card:CardContent>
                <twig:Table variant="outline">
                    <twig:Table:TableHeader class="bg-muted">
                        <twig:Table:TableRow>
                            <twig:Table:TableHead>{{ 'common.col.url'|trans }}</twig:Table:TableHead>
                            <twig:Table:TableHead>{{ 'common.col.method'|trans }}</twig:Table:TableHead>
                            <twig:Table:TableHead>{{ 'common.col.ip'|trans }}</twig:Table:TableHead>
                            <twig:Table:TableHead>{{ 'common.col.user_agent'|trans }}</twig:Table:TableHead>
                            <twig:Table:TableHead>{{ 'common.col.referer'|trans }}</twig:Table:TableHead>
                            <twig:Table:TableHead>{{ 'common.col.visited_at'|trans }}</twig:Table:TableHead>
                            <twig:Table:TableHead />
                        </twig:Table:TableRow>
                    </twig:Table:TableHeader>
                    <twig:Table:TableBody>
                        {% for page_view in page_views %}
                            <twig:Table:TableRow>
                                <twig:Table:TableCell>{{ page_view.url }}</twig:Table:TableCell>
                                <twig:Table:TableCell>{{ page_view.method }}</twig:Table:TableCell>
                                <twig:Table:TableCell>{{ page_view.ip }}</twig:Table:TableCell>
                                <twig:Table:TableCell>{{ page_view.userAgent }}</twig:Table:TableCell>
                                <twig:Table:TableCell>{{ page_view.referer }}</twig:Table:TableCell>
                                <twig:Table:TableCell>{{ page_view.visitedAt|date }}</twig:Table:TableCell>
                            </twig:Table:TableRow>
                        {% endfor %}
                    </twig:Table:TableBody>
                </twig:Table>
            </twig:Card:CardContent>
        </twig:Card>
    {%- endif -%}
{% endblock %}
